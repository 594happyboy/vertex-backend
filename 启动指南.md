# 🚀 项目启动指南 - 超详细版

> **适用系统**: Windows 10/11、Linux (Ubuntu/Debian/CentOS)  
> **难度级别**: ⭐ 零基础可上手  
> **预计时间**: 30-60分钟

---

## 📋 目录

- [Windows系统启动指南](#一windows系统启动指南新手向)
- [Linux系统启动指南](#二linux系统启动指南)
- [验证和测试](#三验证应用是否启动成功)
- [常见问题](#四常见问题解决)

---

## 一、Windows系统启动指南（新手向）

### 📌 准备工作清单

在开始之前，你需要安装以下软件（如果已安装可跳过）：

- ✅ Java 17 或更高版本
- ✅ Docker Desktop（用于运行MySQL、Redis、MinIO）
- ✅ Maven（用于编译和运行项目）
- ✅ Git（可选，用于版本控制）

---

### 步骤1: 安装Java 17

#### 1.1 下载Java

访问Oracle官网下载Java 17：
- 链接：https://www.oracle.com/java/technologies/downloads/#java17
- 选择：**Windows** → **x64 Installer**
- 下载文件：`jdk-17_windows-x64_bin.exe`

或者使用OpenJDK（推荐）：
- 链接：https://adoptium.net/
- 选择：**Temurin 17 (LTS)** → **Windows x64 .msi**

#### 1.2 安装Java

1. 双击下载的安装包
2. 点击"下一步"完成安装
3. 默认安装路径：`C:\Program Files\Java\jdk-17`

#### 1.3 配置环境变量

1. 右键"此电脑" → "属性" → "高级系统设置" → "环境变量"
2. 在"系统变量"中点击"新建"：
   - **变量名**: `JAVA_HOME`
   - **变量值**: `C:\Program Files\Java\jdk-17` (你的Java安装路径)
3. 找到"Path"变量，点击"编辑" → "新建"，添加：
   - `%JAVA_HOME%\bin`
4. 点击"确定"保存

#### 1.4 验证Java安装

打开PowerShell或CMD，输入：
```powershell
java -version
```

应该看到类似输出：
```
java version "17.0.x"
```

✅ **如果看到版本号，说明Java安装成功！**

---

### 步骤2: 安装Maven

#### 2.1 下载Maven

访问Maven官网：
- 链接：https://maven.apache.org/download.cgi
- 下载：**apache-maven-3.9.x-bin.zip** (Binary zip archive)

#### 2.2 解压Maven

1. 将下载的zip文件解压到：`C:\Program Files\Apache\maven`
2. 确保路径类似：`C:\Program Files\Apache\maven\bin\mvn.cmd`

#### 2.3 配置Maven环境变量

1. 右键"此电脑" → "属性" → "高级系统设置" → "环境变量"
2. 在"系统变量"中点击"新建"：
   - **变量名**: `MAVEN_HOME`
   - **变量值**: `C:\Program Files\Apache\maven`
3. 找到"Path"变量，点击"编辑" → "新建"，添加：
   - `%MAVEN_HOME%\bin`
4. 点击"确定"保存

#### 2.4 验证Maven安装

打开新的PowerShell或CMD窗口，输入：
```powershell
mvn -version
```

应该看到类似输出：
```
Apache Maven 3.9.x
```

✅ **如果看到版本号，说明Maven安装成功！**

---

### 步骤3: 安装Docker Desktop

#### 3.1 下载Docker Desktop

访问Docker官网：
- 链接：https://www.docker.com/products/docker-desktop/
- 点击：**Download for Windows**
- 下载文件：`Docker Desktop Installer.exe`

#### 3.2 安装Docker Desktop

1. 双击安装包开始安装
2. 勾选"Use WSL 2 instead of Hyper-V"（如果有）
3. 点击"OK"开始安装
4. 安装完成后，点击"Close and restart"重启电脑

#### 3.3 启动Docker Desktop

1. 重启后，双击桌面的"Docker Desktop"图标
2. 等待Docker启动（右下角Docker图标不再闪烁）
3. 可能需要登录Docker账号（可选，跳过也行）

#### 3.4 验证Docker安装

打开PowerShell或CMD，输入：
```powershell
docker --version
docker-compose --version
```

应该看到类似输出：
```
Docker version 24.x.x
Docker Compose version v2.x.x
```

✅ **如果看到版本号，说明Docker安装成功！**

---

### 步骤4: 启动项目依赖服务（MySQL、Redis、MinIO）

#### 4.1 打开项目目录

1. 打开Cursor编辑器
2. 确保你在项目根目录：`E:\SpringProjects\multifunctional-backend`
3. 在Cursor中打开终端：
   - 方式1：菜单栏 → 终端 → 新建终端
   - 方式2：快捷键 `Ctrl + ~`
   - 方式3：快捷键 `Ctrl + Shift + `` ` ``

#### 4.2 启动Docker服务

在Cursor的终端中输入：
```powershell
# 启动MySQL、Redis、MinIO
docker-compose up -d
```

**说明**：
- `docker-compose up`：启动所有服务
- `-d`：后台运行（detached模式）

第一次运行会下载镜像，可能需要5-10分钟，请耐心等待。

#### 4.3 查看服务状态

```powershell
# 查看所有服务是否启动
docker-compose ps
```

应该看到类似输出：
```
NAME                STATUS              PORTS
filedb-mysql        running             0.0.0.0:3306->3306/tcp
filedb-redis        running             0.0.0.0:6379->6379/tcp
filedb-minio        running             0.0.0.0:9000-9001->9000-9001/tcp
```

✅ **如果STATUS都是"running"，说明服务启动成功！**

#### 4.4 验证服务可访问

打开浏览器，访问MinIO控制台：
- 地址：http://localhost:9001
- 用户名：`admin`
- 密码：`admin123`

✅ **如果能看到MinIO登录页面，说明服务完全正常！**

---

### 步骤5: 初始化数据库

#### 5.1 进入MySQL容器

在Cursor终端中输入：
```powershell
# 进入MySQL容器
docker exec -it filedb-mysql mysql -uroot -proot123
```

**说明**：
- `docker exec`：在容器中执行命令
- `-it`：交互模式
- `filedb-mysql`：容器名称
- `mysql -uroot -proot123`：登录MySQL

#### 5.2 执行数据库初始化

此时你已经进入MySQL命令行，输入：
```sql
-- 创建数据库（如果不存在）
CREATE DATABASE IF NOT EXISTS filedb CHARACTER SET utf8mb4;

-- 使用数据库
USE filedb;

-- 查看数据库
SHOW DATABASES;
```

如果看到`filedb`在列表中，说明数据库创建成功。

#### 5.3 导入数据表

退出MySQL命令行：
```sql
exit;
```

然后在Cursor终端执行：
```powershell
# 导入SQL脚本
docker exec -i filedb-mysql mysql -uroot -proot123 filedb < src/main/resources/sql/schema.sql
```

**注意**：
- 如果上面命令报错，使用下面的方式：

```powershell
# 方式2：手动复制SQL内容
# 1. 打开 src/main/resources/sql/schema.sql
# 2. 复制所有SQL内容
# 3. 进入MySQL: docker exec -it filedb-mysql mysql -uroot -proot123 filedb
# 4. 粘贴SQL内容并执行
```

#### 5.4 验证数据表

```powershell
# 再次进入MySQL
docker exec -it filedb-mysql mysql -uroot -proot123 filedb

# 查看表
SHOW TABLES;
```

应该看到：
```
+------------------+
| Tables_in_filedb |
+------------------+
| file_metadata    |
| user             |
+------------------+
```

✅ **如果看到这两个表，说明数据库初始化成功！**

输入`exit;`退出MySQL。

---

### 步骤6: 启动Spring Boot应用

#### 6.1 检查配置文件

确保 `src/main/resources/application.properties` 中的配置正确：
```properties
# 数据库配置（应该已经正确）
spring.datasource.url=jdbc:mysql://localhost:3306/filedb?useUnicode=true&characterEncoding=utf8&serverTimezone=Asia/Shanghai&useSSL=false&allowPublicKeyRetrieval=true
spring.datasource.username=root
spring.datasource.password=root123
```

#### 6.2 启动应用

在Cursor终端中输入：
```powershell
# 使用Maven启动
mvn spring-boot:run
```

**第一次运行会下载依赖包，可能需要5-15分钟，请耐心等待。**

#### 6.3 观察启动日志

你应该看到类似的日志输出：
```
  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v3.5.6)

2025-10-09 15:30:25 [main] INFO  c.z.m.MultifunctionalBackendApplication - Starting MultifunctionalBackendApplication...
...
2025-10-09 15:30:32 [main] INFO  o.s.b.w.e.t.TomcatWebServer - Tomcat started on port(s): 8080 (http)
2025-10-09 15:30:32 [main] INFO  c.z.m.MultifunctionalBackendApplication - Started MultifunctionalBackendApplication in 7.234 seconds
```

✅ **如果看到"Started MultifunctionalBackendApplication"，说明应用启动成功！**

---

### 步骤7: 验证应用是否正常运行

#### 7.1 打开浏览器测试

访问以下地址：

1. **健康检查**：http://localhost:8080/api/files/health
   - 应该看到：`{"code":200,"message":"服务正常",...}`

2. **API文档**：http://localhost:8080/doc.html
   - 应该看到Knife4j文档界面

✅ **如果都能正常访问，恭喜你，项目启动成功！**

---

## 二、Linux系统启动指南

### Ubuntu/Debian系统

#### 步骤1: 安装Java 17

```bash
# 更新软件包列表
sudo apt update

# 安装OpenJDK 17
sudo apt install openjdk-17-jdk -y

# 验证安装
java -version
```

#### 步骤2: 安装Maven

```bash
# 安装Maven
sudo apt install maven -y

# 验证安装
mvn -version
```

#### 步骤3: 安装Docker

```bash
# 安装Docker
sudo apt install docker.io -y

# 安装Docker Compose
sudo apt install docker-compose -y

# 启动Docker服务
sudo systemctl start docker
sudo systemctl enable docker

# 将当前用户添加到docker组（避免每次使用sudo）
sudo usermod -aG docker $USER

# 重新登录或执行
newgrp docker

# 验证安装
docker --version
docker-compose --version
```

#### 步骤4: 启动项目

```bash
# 1. 进入项目目录
cd /path/to/multifunctional-backend

# 2. 启动Docker服务
docker-compose up -d

# 3. 查看服务状态
docker-compose ps

# 4. 初始化数据库
docker exec -i filedb-mysql mysql -uroot -proot123 filedb < src/main/resources/sql/schema.sql

# 5. 启动Spring Boot应用
mvn spring-boot:run
```

### CentOS/RHEL系统

```bash
# 1. 安装Java 17
sudo yum install java-17-openjdk-devel -y

# 2. 安装Maven
sudo yum install maven -y

# 3. 安装Docker
sudo yum install docker -y
sudo systemctl start docker
sudo systemctl enable docker

# 4. 安装Docker Compose
sudo curl -L "https://github.com/docker/compose/releases/download/v2.20.0/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose

# 5. 后续步骤同Ubuntu
```

## 三、验证应用是否启动成功

### 方式1: 浏览器访问（最简单）

打开浏览器，访问以下地址：

#### 1. 健康检查接口
```
http://localhost:8080/api/files/health
```

应该看到：
```json
{
  "code": 200,
  "message": "服务正常",
  "data": {
    "status": "UP",
    "service": "File Management Service",
    "timestamp": "1728456789000"
  }
}
```

#### 2. API文档界面
```
http://localhost:8080/doc.html
```

应该看到一个漂亮的API文档页面（Knife4j界面）

✅ **如果能看到以上内容，说明项目启动成功！**

---

### 方式2: 使用Swagger测试（推荐）

#### 3.1 访问Swagger文档

浏览器打开：http://localhost:8080/doc.html

#### 3.2 测试文件上传

1. 点击左侧菜单"文件管理"
2. 找到"上传文件"接口
3. 点击"调试"按钮
4. 点击"选择文件"，选择一个文件（如桌面的图片或文档）
5. 点击"发送"

应该看到返回结果：
```json
{
  "code": 200,
  "message": "文件上传成功",
  "data": {
    "id": 1,
    "fileName": "test.jpg",
    "fileSizeFormatted": "1.2 MB",
    "downloadUrl": "/api/files/1/download"
  }
}
```

#### 3.3 测试文件列表

1. 找到"获取文件列表"接口
2. 点击"调试"
3. 点击"发送"

应该看到刚才上传的文件在列表中。

#### 3.4 测试文件下载

1. 复制上传返回的`id`（如1）
2. 在浏览器访问：`http://localhost:8080/api/files/1/download`
3. 文件应该自动下载

✅ **如果所有功能都正常，恭喜你完成了整个项目的搭建！**

---

### 方式3: 使用PowerShell/CMD测试（高级）

#### Windows系统

打开PowerShell，输入：

```powershell
# 1. 测试健康检查
Invoke-WebRequest -Uri "http://localhost:8080/api/files/health" | Select-Object -ExpandProperty Content

# 2. 上传文件（将 C:\test.txt 替换为你的文件路径）
$file = "C:\test.txt"
curl.exe -X POST "http://localhost:8080/api/files/upload" -F "file=@$file"

# 3. 获取文件列表
Invoke-WebRequest -Uri "http://localhost:8080/api/files" | Select-Object -ExpandProperty Content

# 4. 下载文件（假设ID为1）
Invoke-WebRequest -Uri "http://localhost:8080/api/files/1/download" -OutFile "downloaded_file"
```

#### Linux系统

```bash
# 1. 测试健康检查
curl http://localhost:8080/api/files/health

# 2. 上传文件
curl -X POST http://localhost:8080/api/files/upload \
  -F "file=@/path/to/test.pdf"

# 3. 获取文件列表
curl http://localhost:8080/api/files | jq

# 4. 下载文件
curl -OJ http://localhost:8080/api/files/1/download
```

---

## 四、常见问题解决

### ❌ 问题1: Java版本不对

**错误提示**：
```
Error: A JNI error has occurred
...
Unsupported class file major version 61
```

**原因**: Java版本低于17

**解决**：
1. 卸载旧版本Java
2. 重新按照"步骤1"安装Java 17
3. 验证：`java -version` 应显示17.x

---

### ❌ 问题2: 端口被占用

**错误提示**：
```
Port 8080 is already in use
或
Port 3306 is already in use
```

**解决方法**：

#### Windows系统
```powershell
# 查看占用8080端口的进程
netstat -ano | findstr "8080"

# 会看到类似输出：
# TCP    0.0.0.0:8080    0.0.0.0:0    LISTENING    12345

# 杀死进程（12345是进程ID）
taskkill /PID 12345 /F

# 同样方法处理3306端口
netstat -ano | findstr "3306"
taskkill /PID <进程ID> /F
```

#### Linux系统
```bash
# 查看占用端口的进程
sudo lsof -i :8080

# 杀死进程
sudo kill -9 <PID>
```

---

### ❌ 问题3: Docker启动失败

**错误提示**：
```
error during connect: this error may indicate that the docker daemon is not running
```

**解决**：
1. 确认Docker Desktop已启动（Windows任务栏有Docker图标）
2. 如果未启动，双击桌面"Docker Desktop"图标
3. 等待几分钟直到图标不再闪烁
4. 重新执行`docker-compose up -d`

---

### ❌ 问题4: Maven下载依赖慢

**现象**: `mvn spring-boot:run` 一直卡在下载

**解决**: 配置Maven国内镜像

1. 找到Maven配置文件：`C:\Program Files\Apache\maven\conf\settings.xml`
2. 在`<mirrors>`标签内添加：

```xml
<mirror>
    <id>aliyun</id>
    <mirrorOf>central</mirrorOf>
    <name>Aliyun Maven</name>
    <url>https://maven.aliyun.com/repository/public</url>
</mirror>
```

3. 保存后重新运行`mvn spring-boot:run`

---

### ❌ 问题5: MySQL初始化失败

**错误提示**：
```
ERROR 1045 (28000): Access denied for user 'root'@'localhost'
```

**解决**：
1. 停止MySQL容器：`docker-compose stop mysql`
2. 删除MySQL容器：`docker-compose rm mysql`
3. 删除数据卷：`docker volume rm multifunctional-backend_mysql-data`
4. 重新启动：`docker-compose up -d mysql`
5. 等待30秒后重新初始化数据库

---

### ❌ 问题6: 应用启动报错

**错误提示**：
```
Failed to configure a DataSource
```

**原因**: 数据库未启动或配置错误

**解决**：
1. 检查Docker服务是否运行：`docker-compose ps`
2. 检查MySQL状态应该是"running"
3. 如果不是，执行：`docker-compose restart mysql`
4. 等待30秒后重新启动应用

---

### ❌ 问题7: 文件上传失败

**错误提示**：
```
文件上传失败 / 不支持的文件类型
```

**解决**：
1. 检查文件大小不超过100MB
2. 检查文件类型在支持列表中：
   - 支持的类型：jpg, jpeg, png, gif, pdf, doc, docx, xls, xlsx, ppt, pptx, zip, rar, txt, mp4, mp3
3. 如需支持其他类型，修改`application.properties`：
   ```properties
   file.allowed-types=jpg,jpeg,png,pdf,你的类型
   ```

---

## 五、停止和清理

### 停止应用

#### 1. 停止Spring Boot
在Cursor终端中按 `Ctrl + C`

#### 2. 停止Docker服务
```powershell
# 停止所有服务
docker-compose stop

# 或者停止并删除容器（保留数据）
docker-compose down

# 或者完全清理（包括数据）
docker-compose down -v
```

### 重新启动

```powershell
# 启动Docker服务
docker-compose up -d

# 启动应用
mvn spring-boot:run
```

---

## 六、快速启动脚本（推荐）

### Windows一键启动脚本

创建文件：`启动.bat`，内容如下：

```bat
@echo off
echo ========================================
echo 文件管理系统 - 一键启动脚本
echo ========================================

echo.
echo [1/4] 启动Docker服务...
docker-compose up -d
if %errorlevel% neq 0 (
    echo Docker启动失败，请检查Docker Desktop是否运行
    pause
    exit /b 1
)

echo.
echo [2/4] 等待服务启动...
timeout /t 10 /nobreak > nul

echo.
echo [3/4] 检查服务状态...
docker-compose ps

echo.
echo [4/4] 启动Spring Boot应用...
echo 首次启动会下载依赖，请耐心等待...
mvn spring-boot:run

pause
```

使用方法：
1. 在项目根目录创建`启动.bat`文件
2. 双击运行
3. 等待启动完成

### Linux一键启动脚本

创建文件：`start.sh`，内容如下：

```bash
#!/bin/bash

echo "========================================"
echo "文件管理系统 - 一键启动脚本"
echo "========================================"

echo ""
echo "[1/4] 启动Docker服务..."
docker-compose up -d

echo ""
echo "[2/4] 等待服务启动..."
sleep 10

echo ""
echo "[3/4] 检查服务状态..."
docker-compose ps

echo ""
echo "[4/4] 启动Spring Boot应用..."
mvn spring-boot:run
```

使用方法：
```bash
# 添加执行权限
chmod +x start.sh

# 运行脚本
./start.sh
```

---

## 七、下一步学习

### 🎯 掌握核心功能
1. ✅ 成功启动项目
2. ✅ 测试文件上传下载
3. ✅ 查看API文档
4. ✅ 理解项目结构

### 📚 进阶学习
1. 学习Spring Boot核心概念
2. 学习Kotlin语法
3. 学习MyBatis-Plus使用
4. 学习Redis缓存策略
5. 学习Docker部署

### 🚀 功能扩展
1. 开发Vue 3前端界面
2. 添加用户认证（JWT）
3. 实现文件分享功能
4. 集成云存储（阿里云OSS）
5. 添加文件预览功能

---

## 八、获取帮助

### 📖 文档资源
- 查看 `项目概览.md` - 了解项目架构
- 查看 `文件管理系统-技术方案.md` - 详细技术方案
- 查看 `README-Backend.md` - 后端开发文档

### 🔍 调试技巧
1. **查看应用日志**：在Cursor终端查看启动日志
2. **查看Docker日志**：`docker-compose logs -f`
3. **使用Swagger测试**：http://localhost:8080/doc.html
4. **检查服务状态**：`docker-compose ps`

### ⚡ 快速定位问题
1. 应用无法启动 → 检查Docker服务
2. 接口报错 → 查看Cursor终端日志
3. 数据库连接失败 → 检查MySQL容器状态
4. 文件上传失败 → 检查MinIO服务

---

## 🎉 恭喜！

如果你看到这里并成功启动了项目，恭喜你！

你已经完成了：
- ✅ Java、Maven、Docker环境搭建
- ✅ 项目依赖服务启动
- ✅ 数据库初始化
- ✅ Spring Boot应用启动
- ✅ API功能测试

**现在你可以**：
1. 开始学习代码，理解业务逻辑
2. 尝试修改代码，添加新功能
3. 开发前端界面，实现完整的全栈项目
4. 将项目部署到服务器

**祝你学习顺利，成为优秀的全栈开发工程师！** 💪🚀

---

*最后更新：2025-10-09*  
*作者：ZZY*  
*如有问题，欢迎反馈！*


